{"version":3,"file":"2-snackbar.js","sources":["../src/js/2-snackbar.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst snackbarFormEl = document.querySelector('.snackbar-form');\nconst submitBtnEl = document.querySelector('.snackbar-form-btn[type=\"submit\"]');\n\nconst initialFormData = { delay: null, state: null };\nlet formData = { ...initialFormData };\n\nsnackbarFormEl.addEventListener('input', handleFormElInput);\nsnackbarFormEl.addEventListener('submit', handleFormElSubmit);\n\n//!======================================================\nfunction handleFormElInput(e) {\n  const { name, value } = e.target;\n\n  if (!(name in formData)) {\n    submitBtnEl.disabled = true;\n    return;\n  }\n\n  formData[name] = value;\n\n  const isValidFormData = isFormValid();\n  submitBtnEl.disabled = !isValidFormData;\n}\n\nfunction handleFormElSubmit(e) {\n  e.preventDefault();\n  const isValidFormData = isFormValid();\n\n  if (!isValidFormData) {\n    submitBtnEl.disabled = true;\n    return;\n  }\n\n  const { state, delay } = formData;\n  createPromise({ state, delay }).then(onFulfilled).catch(onRejected);\n  resetForm();\n}\n\n//!======================================================\nfunction resetForm() {\n  snackbarFormEl.reset();\n  formData = { ...initialFormData };\n  submitBtnEl.disabled = true;\n}\n\nfunction isFormValid() {\n  if (formData.delay == null) return false;\n\n  const delayTrimmedStr = String(formData.delay).trim();\n  if (!delayTrimmedStr) return false;\n\n  const delay = Number(formData.delay);\n  formData.delay = delay;\n  const isDelayValid = Number.isFinite(delay) && delay >= 0;\n  const isStateValid = Boolean(formData.state);\n\n  return isDelayValid && isStateValid;\n}\n\n//!======================================================\n\nconst createPromise = ({ state, delay }) => {\n  const promise = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const isFulfilled = checkFulfilledState(state);\n\n      if (isFulfilled) {\n        resolve(delay);\n      } else {\n        reject(delay);\n      }\n    }, delay);\n  });\n\n  return promise;\n};\n\nfunction onFulfilled(delay) {\n  showMessage(delay, true);\n}\n\nfunction onRejected(delay) {\n  showMessage(delay, false);\n}\n\nfunction checkFulfilledState(state) {\n  return state === 'fulfilled';\n}\n\nfunction showMessage(delay, isFulfilled) {\n  const toastClass = isFulfilled ? 'success' : 'error';\n  const toastMessage = isFulfilled\n    ? `✅ Fulfilled promise in ${delay}ms`\n    : `❌ Rejected promise in ${delay}ms`;\n\n  iziToast.show({\n    message: toastMessage,\n    titleColor: '#fff',\n    position: 'topRight',\n    class: `custom-${toastClass}-toast`,\n    timeout: Math.max(delay, 1000),\n  });\n}\n"],"names":["snackbarFormEl","submitBtnEl","initialFormData","formData","handleFormElInput","handleFormElSubmit","e","name","value","isValidFormData","isFormValid","state","delay","createPromise","onFulfilled","onRejected","resetForm","isDelayValid","isStateValid","resolve","reject","checkFulfilledState","showMessage","isFulfilled","toastClass","toastMessage","iziToast"],"mappings":"wIAGA,MAAMA,EAAiB,SAAS,cAAc,gBAAgB,EACxDC,EAAc,SAAS,cAAc,mCAAmC,EAExEC,EAAkB,CAAE,MAAO,KAAM,MAAO,IAAI,EAClD,IAAIC,EAAW,CAAE,GAAGD,GAEpBF,EAAe,iBAAiB,QAASI,CAAiB,EAC1DJ,EAAe,iBAAiB,SAAUK,CAAkB,EAE5D;AACA,SAASD,EAAkBE,EAAG,CAC5B,KAAM,CAAE,KAAAC,EAAM,MAAAC,GAAUF,EAAE,OAE1B,GAAI,EAAEC,KAAQJ,GAAW,CACvBF,EAAY,SAAW,GACvB,MACD,CAEDE,EAASI,CAAI,EAAIC,EAEjB,MAAMC,EAAkBC,IACxBT,EAAY,SAAW,CAACQ,CAC1B,CAEA,SAASJ,EAAmBC,EAAG,CAI7B,GAHAA,EAAE,eAAc,EAGZ,CAFoBI,IAEF,CACpBT,EAAY,SAAW,GACvB,MACD,CAED,KAAM,CAAE,MAAAU,EAAO,MAAAC,CAAO,EAAGT,EACzBU,EAAc,CAAE,MAAAF,EAAO,MAAAC,EAAO,EAAE,KAAKE,CAAW,EAAE,MAAMC,CAAU,EAClEC,GACF,CAEA;AACA,SAASA,GAAY,CACnBhB,EAAe,MAAK,EACpBG,EAAW,CAAE,GAAGD,GAChBD,EAAY,SAAW,EACzB,CAEA,SAASS,GAAc,CAIrB,GAHIP,EAAS,OAAS,MAGlB,CADoB,OAAOA,EAAS,KAAK,EAAE,KAAI,EAC7B,MAAO,GAE7B,MAAMS,EAAQ,OAAOT,EAAS,KAAK,EACnCA,EAAS,MAAQS,EACjB,MAAMK,EAAe,OAAO,SAASL,CAAK,GAAKA,GAAS,EAClDM,EAAe,EAAQf,EAAS,MAEtC,OAAOc,GAAgBC,CACzB,CAEA;AAEA,MAAML,EAAgB,CAAC,CAAE,MAAAF,EAAO,MAAAC,KACd,IAAI,QAAQ,CAACO,EAASC,IAAW,CAC/C,WAAW,IAAM,CACKC,EAAoBV,CAAK,EAG3CQ,EAAQP,CAAK,EAEbQ,EAAOR,CAAK,CAEf,EAAEA,CAAK,CACZ,CAAG,EAKH,SAASE,EAAYF,EAAO,CAC1BU,EAAYV,EAAO,EAAI,CACzB,CAEA,SAASG,EAAWH,EAAO,CACzBU,EAAYV,EAAO,EAAK,CAC1B,CAEA,SAASS,EAAoBV,EAAO,CAClC,OAAOA,IAAU,WACnB,CAEA,SAASW,EAAYV,EAAOW,EAAa,CACvC,MAAMC,EAAaD,EAAc,UAAY,QACvCE,EAAeF,EACjB,0BAA0BX,CAAK,KAC/B,yBAAyBA,CAAK,KAElCc,EAAS,KAAK,CACZ,QAASD,EACT,WAAY,OACZ,SAAU,WACV,MAAO,UAAUD,CAAU,SAC3B,QAAS,KAAK,IAAIZ,EAAO,GAAI,CACjC,CAAG,CACH"}